# TradeHistory for QUIK
Скрипт на LUA для расчета PnL по ФИФО, отображения текущих и закрытых позиций.
Предназначен для запуска в торговом терминале QUIK производства компании ARQA.

## Что умеет:
  * Фиксирует сделки и сразу рассчитывает финансовый результат по фифо.
  * Отображает открытые позиции.
  * Отображает детализацию открытых позиций по партиям - при даблклике на строку с позицией.
  * Позиции можно скрывать/разворачивать по классам - щелчок на имени класса.
  * Отображает закрытые позиции и финансовый результат по ним.

## Описание настроек.

Настройки хранятся в файле TradeHistory_settings.lua  

  * self.groupByClass = true/false - включает группировку инструментов по классам  
  * self.filter_by_class = {}  
	self.filter_by_class['SPBFUT']=true - разворачивает содержимое класса при запуске скрипта (если есть позиции по бумагам этого класса).  
  * self.db_path = getScriptPath() .. "\\positions2.db" - путь к базе данных.  
  * self.dark_theme = true/false - переключает темы оформления (светлая/темная).  
  * self.show_total_collateral_on_forts = true/false - показывать общую сумму ГО на ФОРТС.  
  * self.show_totals = true/false - показывать итоги для каждого класса (если есть группировка по классам).  
  * self.columns_visibility = {}  
    self.columns_visibility["account"]=true/false - выбор колонок для отображения. Если сделать колонку невидимой, то она все равно будет отображаться в таблице, но с нулевой шириной (можно раздвинуть мышкой).  